<div class="container">
  <div class="row">
    <div class="col-sm-100 col-md-100 col-lg-10 mx-auto">
      <div class="card border-0 shadow rounded-9 my-9">
        <div class="card-body p-10 p-sm-9">
          <h4 class="card-title text-center mb-5 fw-light fs-5">
            <b>Livros</b>
          </h4>
          <form id="add-form" (ngSubmit)="f.form.valid && saveLivro(f)" #f="ngForm" novalidate>

            <div class="form-group">
              <label for="nome">Nome</label>
              <input [(ngModel)]="livro.nome_livro" #model="ngModel" required name="nome" type="text" class="form-control"
                     id="nome" placeholder="Informe o nome do livro" [ngClass]="{
                  'is-invalid': f.submitted && model.invalid}">
            </div>
            <div class="invalid-feedback">
              <div *ngIf="model.errors">Nome do livro é obrigatório</div>
            </div>

            <div class="form-group">
              <label for="nome">Autor</label>
              <input [(ngModel)]="livro.autor" #model="ngModel" required name="nome_autor" type="text" class="form-control"
                     id="nome_autor" placeholder="Informe o nome do autor" [ngClass]="{
                  'is-invalid': f.submitted && model.invalid}">
            </div>
            <div class="invalid-feedback">
              <div *ngIf="model.errors">Nome do autor é obrigatório</div>
            </div>

            <div class="form-group">
              <label for="nome">Editora</label>
              <input [(ngModel)]="livro.editora" #model="ngModel" required name="editora" type="text" class="form-control"
                     id="editora" placeholder="Informe o nome da editora" [ngClass]="{
                  'is-invalid': f.submitted && model.invalid}">
            </div>
            <div class="invalid-feedback">
              <div *ngIf="model.errors">Nome da editora é obrigatório</div>
            </div>

            <div class="form-group">
              <label for="genero">Genero</label>
              <input [(ngModel)]="livro.genero" #model="ngModel" required name="genero" type="text" class="form-control"
                     id="genero" placeholder="Informe o nome do genero" [ngClass]="{
                  'is-invalid': f.submitted && model.invalid}">
            </div>
            <div class="invalid-feedback">
              <div *ngIf="model.errors">Nome do genero é obrigatório</div>
            </div>

            <div class="form-group">
              <label for="num_pag">Nº de Páginas</label>
              <input [(ngModel)]="livro.num_paginas" name="num_pag" type="number" class="form-control" id="num_pag"
                     placeholder="Informe o nº de páginas" [ngClass]="{
                  'is-invalid': f.submitted && model.invalid}">
            </div>
            <div class="invalid-feedback">
              <div *ngIf="model.errors">Número de páginas é obrigatório</div>
            </div>

            <div class="form-group">
              <label for="num_pag">Preco</label>
              <input [(ngModel)]="livro.preco" name="preco" type="number" class="form-control" id="preco"
                     placeholder="Informe o preco do livro" [ngClass]="{
                  'is-invalid': f.submitted && model.invalid}">
            </div>
            <div class="invalid-feedback">
              <div *ngIf="model.errors">Número do preco é obrigatório</div>
            </div>



            <div *ngIf="numaux==0" class="form-group">
              <label for="estoque_liv">Nº de Estoque</label>
              <input [(ngModel)]="livro.estoque_liv" name="num_pag" type="number" class="form-control" id="estoque_liv"
                     placeholder="Informe o nº do estoque" [ngClass]="{
                  'is-invalid': f.submitted && model.invalid}">
            </div>
            <div class="invalid-feedback">
              <div *ngIf="model.errors">Número do estoque é obrigatório</div>
            </div>


<!--            <tr *ngIf="numaux==1">-->
<!--              <th colspan="4" class="text-right">Estoque:</th>-->
<!--              <span>{{livro.estoque_liv}}</span>-->
<!--              <input [(ngModel)]="livro.novoestoq" type="number" class="form-control" id="novoestoq" name="novoestoq">-->
<!--              <button class="btn btn-primary" (click)="adicionarEstoque(livro.novoestoq)">Adicionar</button>-->
<!--              <button class="btn btn-danger" (click)="removerEstoque(livro.novoestoq)">Remover</button>-->

<!--              <th></th>-->
<!--            </tr>-->

            <div class="form-group">
              <label for="ano_publi">Data de Lançamento</label>
              <input [(ngModel)]="livro.data_lanc" name="ano_publi" type="date" class="form-control" id="ano_publi"
                     placeholder="Informe o ano de Laçamento do livro" [ngClass]="{
                  'is-invalid': f.submitted && model.invalid}">
            </div>
            <div class="invalid-feedback">
              <div *ngIf="model.errors">Data é obrigatório</div>
            </div>


            <tr *ngIf="numaux==1">
              <th colspan="4" class="text-right">Estoque:</th>
              <span>{{livro.estoque_liv}}</span>
              <input [(ngModel)]="livro.novoestoq" type="number" class="form-control" id="novoestoq" name="novoestoq">
              <button class="btn btn-primary" (click)="adicionarEstoque(livro.novoestoq)">Adicionar</button>
              <button class="btn btn-danger" (click)="removerEstoque(livro.novoestoq)">Remover</button>

              <th></th>
            </tr>

            <br>
            <button (click)="cadastrar()" class="btn btn-lg btn-success btn-block">CONFIRMAR</button>
            <br>
          </form>
<!--          <br>-->

<!--          <tr *ngIf="numaux==1">-->
<!--            <th colspan="4" class="text-right">Estoque:</th>-->
<!--            <span>{{livro.estoque_liv}}</span>-->
<!--            <input [(ngModel)]="livro.novoestoq" type="number" class="form-control" id="novoestoq" name="novoestoq">-->
<!--            <button class="btn btn-primary" (click)="adicionarEstoque(livro.novoestoq)">Adicionar</button>-->
<!--            <button class="btn btn-danger" (click)="removerEstoque(livro.novoestoq)">Remover</button>-->

<!--            <th></th>-->
<!--          </tr>-->

        </div>



        <div class="navbar navbar-light bg-light">
          <h4 class="form-inline">
<!--            <input class="busca" #busca type="search" placeholder="Buscar Livro" (keyup)="filtrar(busca.value)">-->
            <input class="form-control mr-sm-2" #busca type="search" placeholder="Pesquisar" (keyup)="filtrar(busca.value)">
          </h4>



<!--          <nav class="navbar navbar-light bg-light">-->
<!--            <form class="form-inline">-->
<!--              <input class="form-control mr-sm-2" #busca type="search" placeholder="Pesquisar" (keyup)="filtrar(busca.value)">-->
<!--&lt;!&ndash;              <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Pesquisar</button>&ndash;&gt;-->
<!--            </form>-->
<!--          </nav>-->


          <div *ngIf="livros.length === 0; else temLivros" class="vazio">
            <h4>Sem livros aqui</h4>
          </div>
          <ng-template #temLivros class="tabela">
            <table class="table table-dark table-striped">
              <thead class="thead-dark">
              <tr>
                <th scope="col">#</th>
                <th scope="col">ID</th>
                <th scope="col">Nome</th>
                <th scope="col">Autor</th>
                <th scope="col">Gênero</th>
                <th scope="col">Editora</th>
                <th scope="col">Ano de Publicação</th>
                <th scope="col">Nº de Páginas</th>
                <th scope="col">Preço</th>
                <th scope="col">Nº de estoque</th>
                <th scope="col">Estoque</th>
                <th scope="col">Editar</th>
                <th scope="col">Excluir</th>
              </tr>
              </thead>
              <tbody>

              <tr *ngFor="let l of livros; index as i">
                <th scope="row">{{i+1}}</th>
                <th>{{l.id_liv}}</th>
                <th>{{l.nome_livro}}</th>
                <th>{{l.autor}}</th>
                <th>{{l.genero}}</th>
                <th>{{l.editora}}</th>
                <th>{{l.data_lanc}}</th>
                <th>{{l.num_paginas}}</th>
                <th>{{l.preco}}</th>
                <th>{{l.estoque_liv}}</th>
                <th> <button type="button" class="btn btn-primary editar" (click)="adicionarcar(l)">Adicionar</button><br></th>
                <th> <button type="button" class="btn btn-warning editar" (click)="editLivro(l)">Editar</button><br></th>
                <th> <button type='button' class="btn btn-danger" (click)="excluirLivro(l.id_liv)">Excluir</button><br></th>

              </tbody>
            </table>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</div>



